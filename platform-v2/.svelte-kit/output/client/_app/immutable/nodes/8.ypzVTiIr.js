import{c as le,a as u,d as ft,f as w,t as W,s as h}from"../chunks/CrWmIGs7.js";import{f as $,p as gt,q as xt,g as e,d as X,h as Ce,a as _t,u as x,c as r,r as a,s,n as V,t as L,b as _}from"../chunks/IT3EpKRj.js";import{l as bt,b as ht,i as Y,s as yt,a as $t}from"../chunks/D1N_oX3-.js";import{I as wt,b as kt,e as Ke,f as Ve,i as Re,s as he,a as Te}from"../chunks/DNuC7A3a.js";import{p as St}from"../chunks/ffe7WQAf.js";import{g as ye}from"../chunks/Xrxa2QLS.js";import{v as Z}from"../chunks/BQ8b0Sla.js";import{a as Pt}from"../chunks/DQourb8u.js";import{s as Et}from"../chunks/CdPPWCzV.js";import{t as R}from"../chunks/5lEJ7jwK.js";import{f as T,b as It}from"../chunks/C77aEFXB.js";import{a as At}from"../chunks/C8Ck3Pe-.js";import{S as de,C as je}from"../chunks/BzgM3b2k.js";import{B as j}from"../chunks/BQmtcL2g.js";import{B as qt}from"../chunks/a13RqEVw.js";import{S as Mt,G as Bt,a as Dt}from"../chunks/3HVNLDwj.js";import{P as zt,M as Ne,S as Ge}from"../chunks/Bq9pQbsU.js";import{I as O}from"../chunks/BKroYgKh.js";import"../chunks/v4ViQ-6U.js";import{R as Ct,T as Kt,B as Vt}from"../chunks/DWaIkSVS.js";import{S as Rt}from"../chunks/CevT2u2T.js";import{D as Tt}from"../chunks/D4U8sIRc.js";import{W as jt}from"../chunks/CrumIDah.js";import{T as Nt}from"../chunks/Dj1IvU8W.js";function Gt(ue,ee){const ve=bt(ee,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];wt(ue,ht({name:"arrow-left"},()=>ve,{get iconNode(){return pe},children:(ce,U)=>{var q=le(),C=$(q);kt(C,ee,"default",{}),u(ce,q)},$$slots:{default:!0}}))}var Lt=w('<img class="w-full h-full object-cover"/>'),Ot=w("<!> ",1),Ut=w("<!> Edit",1),Ht=w('<tr class="border-t border-white/[0.05]"><td class="px-6 py-3.5 text-sm"> </td><td class="px-6 py-3.5"><div class="flex items-center gap-3"><div class="flex-1 h-1.5 bg-white/[0.035] rounded-full overflow-hidden"><div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full"></div></div> <span class="text-sm font-medium text-indigo-400"> </span></div></td><td class="px-6 py-3.5 text-sm font-mono"> </td></tr>'),Wt=w('<div class="px-6 py-5 border-b border-white/[0.05]"><h3 class="font-semibold">Partner Equity</h3></div> <div class="overflow-x-auto"><table class="w-full"><thead><tr class="bg-black/20"><th class="text-left px-6 py-3 text-[10px] font-semibold text-white/45 uppercase tracking-wider">Partner</th><th class="text-left px-6 py-3 text-[10px] font-semibold text-white/45 uppercase tracking-wider">Equity</th><th class="text-left px-6 py-3 text-[10px] font-semibold text-white/45 uppercase tracking-wider">Share of Profit</th></tr></thead><tbody><tr class="border-t border-white/[0.05]"><td class="px-6 py-3.5 text-sm font-medium">Studio (MINDMUSH)</td><td class="px-6 py-3.5"><div class="flex items-center gap-3"><div class="flex-1 h-1.5 bg-white/[0.035] rounded-full overflow-hidden"><div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full"></div></div> <span class="text-sm font-medium text-indigo-400"> </span></div></td><td class="px-6 py-3.5 text-sm font-mono"> </td></tr><!></tbody></table></div>',1),Ft=w("<!> Add",1),Jt=w('<tr><td colspan="4" class="text-center py-8 text-white/45 text-sm">No expenses recorded.</td></tr>'),Qt=w('<tr class="border-t border-white/[0.05] group hover:bg-white/[0.02]"><td class="px-6 py-3.5 text-sm"> </td><td class="px-6 py-3.5 text-sm font-mono"> </td><td class="px-6 py-3.5 text-sm text-white/45"> </td><td class="px-6 py-3.5"><button class="opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-300 transition-all"><!></button></td></tr>'),Xt=w('<div class="flex justify-between items-center px-6 py-5 border-b border-white/[0.05]"><h3 class="font-semibold">Venture Expenses</h3> <!></div> <div class="overflow-x-auto"><table class="w-full"><thead><tr class="bg-black/20"><th class="text-left px-6 py-3 text-[10px] font-semibold text-white/45 uppercase tracking-wider">Description</th><th class="text-left px-6 py-3 text-[10px] font-semibold text-white/45 uppercase tracking-wider">Amount</th><th class="text-left px-6 py-3 text-[10px] font-semibold text-white/45 uppercase tracking-wider">Date</th><th class="px-6 py-3"></th></tr></thead><tbody><!></tbody></table></div>',1),Yt=w('<div class="p-6 space-y-5"><!> <div class="grid grid-cols-2 gap-4"><!> <!></div> <!> <div class="grid grid-cols-2 gap-4"><!> <!></div></div> <div class="flex justify-between px-6 py-5 border-t border-white/[0.05] bg-black/20"><!> <div class="flex gap-3"><!> <!></div></div>',1),Zt=w('<div class="p-6 space-y-5"><!> <!></div> <div class="flex justify-end gap-3 px-6 py-5 border-t border-white/[0.05] bg-black/20"><!> <!></div>',1),er=w('<div class="animate-fade-in"><div class="flex items-center gap-5 mb-6"><button class="w-11 h-11 rounded-xl bg-white/[0.025] border border-white/[0.05] flex items-center justify-center text-white/45 hover:bg-white/[0.04] hover:text-white transition-all"><!></button> <div><!></div> <div class="flex-1"><div class="flex items-center gap-3 flex-wrap"><h1 class="text-2xl font-semibold"> </h1> <!> <!></div> <p class="text-sm text-white/45 mt-1"> </p></div> <div class="flex gap-2.5"><!> <!></div></div> <div><span></span> </div> <div class="grid grid-cols-4 gap-4 mb-6"><!> <!> <!> <!></div> <div class="grid grid-cols-2 gap-5"><!> <!></div></div> <!> <!>',1);function Sr(ue,ee){gt(ee,!0);const ve=()=>$t(Et,"$settings",pe),[pe,ce]=yt();let U=X(!1),q=X(!1),C=X(!1),t=x(()=>Z.get(St.params.id));xt(()=>{e(t)||ye("/ventures")});let i=X(Ce({})),M=X(Ce({description:"",amount:0})),$e=x(()=>{var d;return((d=e(t))==null?void 0:d.expenses.reduce((k,J)=>k+J.amount,0))||0}),te=x(()=>{var d;return(((d=e(t))==null?void 0:d.revenue)||0)-e($e)}),Le=x(()=>{var d,k;return(((d=e(t))==null?void 0:d.revenue)||0)*((((k=e(t))==null?void 0:k.studioEquity)||0)/100)}),F=x(()=>e(t)?e(t).state==="building"||e(t).state==="killed"?{status:"disabled",text:`API sync disabled for ${e(t).state} ventures`}:e(t).type==="game"?e(t).bundleId&&ve().applovinApiKey?{status:"connected",text:`AppLovin API connected â€¢ Bundle: ${e(t).bundleId}`}:e(t).bundleId?{status:"disconnected",text:"AppLovin API key not configured in Settings"}:{status:"disconnected",text:"Bundle ID not configured"}:e(t).superwallKey?{status:"connected",text:"Superwall API connected"}:{status:"disconnected",text:"Superwall API key not configured"}:{status:"none",text:""}),Oe=x(()=>e(t)?e(t).partners.map(d=>{const k=Pt.getUser(d.userId);return{...d,username:(k==null?void 0:k.username)||"Unknown"}}):[]);const Ue=[{value:"building",label:"Building"},{value:"live",label:"Live"},{value:"scaling",label:"Scaling"},{value:"passive",label:"Passive"},{value:"killed",label:"Killed"}],He=[{value:"app",label:"Consumer App"},{value:"game",label:"Mobile Game"}];async function We(){if(!e(t))return;_(U,!0);const d=await At(e(t).id);_(U,!1),d.success?R.show(`Revenue updated: ${T(d.revenue||0)}`,"success"):R.show(d.error||"Sync failed","error")}function Fe(){e(t)&&(_(i,{...e(t)},!0),_(q,!0))}function Je(){var d;if(!e(t)||!((d=e(i).name)!=null&&d.trim())){R.show("Please enter a venture name","error");return}Z.update(e(t).id,{name:e(i).name.trim(),type:e(i).type,state:e(i).state,revenue:e(i).revenue,studioEquity:Math.min(100,Math.max(0,e(i).studioEquity||100)),bundleId:e(i).type==="game"?e(i).bundleId:void 0,superwallKey:e(i).type==="app"?e(i).superwallKey:void 0}),R.show("Venture updated successfully","success"),_(q,!1)}function Qe(){!e(t)||!confirm("Are you sure you want to delete this venture?")||(Z.delete(e(t).id),R.show("Venture deleted","success"),ye("/ventures"))}function Xe(){if(!e(t)||!e(M).description.trim()||e(M).amount<=0){R.show("Please fill in all fields","error");return}Z.addExpense(e(t).id,{description:e(M).description.trim(),amount:e(M).amount,date:new Date().toISOString()}),R.show("Expense added","success"),_(C,!1),_(M,{description:"",amount:0},!0)}function Ye(d){e(t)&&(Z.deleteExpense(e(t).id,d),R.show("Expense deleted","success"))}var we=le(),Ze=$(we);{var et=d=>{var k=er(),J=$(k),me=r(J),re=r(me);re.__click=()=>ye("/ventures");var tt=r(re);Gt(tt,{size:20}),a(re);var ae=s(re,2),rt=r(ae);{var at=o=>{var c=Lt();L(()=>{Te(c,"src",e(t).icon),Te(c,"alt",e(t).name)}),u(o,c)},st=o=>{var c=le(),v=$(c);{var l=p=>{Bt(p,{size:28,class:"text-amber-300"})},g=p=>{Dt(p,{size:28,class:"text-blue-300"})};Y(v,p=>{e(t).type==="game"?p(l):p(g,!1)},!0)}u(o,c)};Y(rt,o=>{e(t).icon?o(at):o(st,!1)})}a(ae);var fe=s(ae,2),ge=r(fe),xe=r(ge),ot=r(xe,!0);a(xe);var ke=s(xe,2);{let o=x(()=>e(t).type==="game"?"orange":"blue");qt(ke,{get variant(){return e(o)},children:(c,v)=>{V();var l=W();L(()=>h(l,e(t).type==="game"?"Game":"App")),u(c,l)},$$slots:{default:!0}})}var nt=s(ke,2);Mt(nt,{get state(){return e(t).state}}),a(ge);var Se=s(ge,2),it=r(Se,!0);a(Se),a(fe);var Pe=s(fe,2),Ee=r(Pe);j(Ee,{variant:"secondary",onclick:We,get disabled(){return e(U)},children:(o,c)=>{var v=Ot(),l=$(v);{let p=x(()=>e(U)?"animate-spin":"");Ct(l,{size:16,get class(){return e(p)}})}var g=s(l);L(()=>h(g,` ${e(U)?"Syncing...":"Sync"}`)),u(o,v)},$$slots:{default:!0}});var dt=s(Ee,2);j(dt,{onclick:Fe,children:(o,c)=>{var v=Ut(),l=$(v);Rt(l,{size:16}),V(),u(o,v)},$$slots:{default:!0}}),a(Pe),a(me);var se=s(me,2),Ie=r(se),lt=s(Ie);a(se);var _e=s(se,2),Ae=r(_e);{let o=x(()=>e(t).type==="game"?"Revenue":"Proceeds"),c=x(()=>T(e(t).revenue||0));de(Ae,{get label(){return e(o)},get value(){return e(c)},get icon(){return Tt},color:"purple"})}var qe=s(Ae,2);{let o=x(()=>T(e($e)));de(qe,{label:"Expenses",get value(){return e(o)},get icon(){return jt},color:"red"})}var Me=s(qe,2);{let o=x(()=>T(e(te))),c=x(()=>e(te)>=0?"text-green-400":"text-red-400");de(Me,{label:"Profit",get value(){return e(o)},get icon(){return Kt},color:"green",get valueClass(){return e(c)}})}var ut=s(Me,2);{let o=x(()=>T(e(Le)));de(ut,{label:"Studio Revenue",get value(){return e(o)},get icon(){return Vt},color:"blue"})}a(_e);var Be=s(_e,2),De=r(Be);je(De,{children:(o,c)=>{var v=Wt(),l=s($(v),2),g=r(l),p=s(r(g)),y=r(p),S=s(r(y)),B=r(S),f=r(B),N=r(f);a(f);var m=s(f,2),E=r(m);a(m),a(B),a(S);var D=s(S),K=r(D,!0);a(D),a(y);var z=s(y);Ke(z,17,()=>e(Oe),Re,(I,P)=>{var G=Ht(),n=r(G),A=r(n,!0);a(n);var b=s(n),oe=r(b),H=r(oe),Q=r(H);a(H);var ne=s(H,2),be=r(ne);a(ne),a(oe),a(b);var ie=s(b),ct=r(ie,!0);a(ie),a(G),L(mt=>{h(A,e(P).username),Ve(Q,`width: ${e(P).equity??""}%`),h(be,`${e(P).equity??""}%`),h(ct,mt)},[()=>T(e(te)*(e(P).equity/100))]),u(I,G)}),a(p),a(g),a(l),L(I=>{Ve(N,`width: ${e(t).studioEquity??""}%`),h(E,`${e(t).studioEquity??""}%`),h(K,I)},[()=>T(e(te)*(e(t).studioEquity/100))]),u(o,v)},$$slots:{default:!0}});var vt=s(De,2);je(vt,{children:(o,c)=>{var v=Xt(),l=$(v),g=s(r(l),2);j(g,{variant:"secondary",size:"sm",onclick:()=>_(C,!0),children:(m,E)=>{var D=Ft(),K=$(D);zt(K,{size:14}),V(),u(m,D)},$$slots:{default:!0}}),a(l);var p=s(l,2),y=r(p),S=s(r(y)),B=r(S);{var f=m=>{var E=Jt();u(m,E)},N=m=>{var E=le(),D=$(E);Ke(D,17,()=>e(t).expenses,Re,(K,z)=>{var I=Qt(),P=r(I),G=r(P,!0);a(P);var n=s(P),A=r(n,!0);a(n);var b=s(n),oe=r(b,!0);a(b);var H=s(b),Q=r(H);Q.__click=()=>Ye(e(z).id);var ne=r(Q);Nt(ne,{size:14}),a(Q),a(H),a(I),L((be,ie)=>{h(G,e(z).description),h(A,be),h(oe,ie)},[()=>T(e(z).amount),()=>It(e(z).date)]),u(K,I)}),u(m,E)};Y(B,m=>{e(t).expenses.length===0?m(f):m(N,!1)})}a(S),a(y),a(p),u(o,v)},$$slots:{default:!0}}),a(Be),a(J);var ze=s(J,2);Ne(ze,{title:"Edit Venture",size:"lg",onclose:()=>_(q,!1),get open(){return e(q)},set open(o){_(q,o,!0)},children:(o,c)=>{var v=Yt(),l=$(v),g=r(l);O(g,{id:"editName",label:"Venture Name",get value(){return e(i).name},set value(n){e(i).name=n}});var p=s(g,2),y=r(p);Ge(y,{id:"editType",label:"Type",get options(){return He},get value(){return e(i).type},set value(n){e(i).type=n}});var S=s(y,2);Ge(S,{id:"editState",label:"State",get options(){return Ue},get value(){return e(i).state},set value(n){e(i).state=n}}),a(p);var B=s(p,2);{var f=n=>{O(n,{id:"editBundleId",label:"Bundle ID (for AppLovin)",placeholder:"com.studio.gamename",get value(){return e(i).bundleId},set value(A){e(i).bundleId=A}})},N=n=>{O(n,{id:"editSuperwallKey",label:"Superwall API Key",placeholder:"pk_...",get value(){return e(i).superwallKey},set value(A){e(i).superwallKey=A}})};Y(B,n=>{e(i).type==="game"?n(f):n(N,!1)})}var m=s(B,2),E=r(m);O(E,{id:"editEquity",type:"number",label:"Studio Ownership (%)",min:0,max:100,get value(){return e(i).studioEquity},set value(n){e(i).studioEquity=n}});var D=s(E,2);O(D,{id:"editRevenue",type:"number",label:"Revenue ($)",min:0,get value(){return e(i).revenue},set value(n){e(i).revenue=n}}),a(m),a(l);var K=s(l,2),z=r(K);j(z,{variant:"danger",onclick:Qe,children:(n,A)=>{V();var b=W("Delete");u(n,b)},$$slots:{default:!0}});var I=s(z,2),P=r(I);j(P,{variant:"ghost",onclick:()=>_(q,!1),children:(n,A)=>{V();var b=W("Cancel");u(n,b)},$$slots:{default:!0}});var G=s(P,2);j(G,{onclick:Je,children:(n,A)=>{V();var b=W("Save");u(n,b)},$$slots:{default:!0}}),a(I),a(K),u(o,v)},$$slots:{default:!0}});var pt=s(ze,2);Ne(pt,{title:"Add Venture Expense",onclose:()=>_(C,!1),get open(){return e(C)},set open(o){_(C,o,!0)},children:(o,c)=>{var v=Zt(),l=$(v),g=r(l);O(g,{id:"expenseDesc",label:"Description",placeholder:"e.g., Marketing campaign",get value(){return e(M).description},set value(f){e(M).description=f}});var p=s(g,2);O(p,{id:"expenseAmount",type:"number",label:"Amount ($)",placeholder:"0",min:0,get value(){return e(M).amount},set value(f){e(M).amount=f}}),a(l);var y=s(l,2),S=r(y);j(S,{variant:"ghost",onclick:()=>_(C,!1),children:(f,N)=>{V();var m=W("Cancel");u(f,m)},$$slots:{default:!0}});var B=s(S,2);j(B,{onclick:Xe,children:(f,N)=>{V();var m=W("Add Expense");u(f,m)},$$slots:{default:!0}}),a(y),u(o,v)},$$slots:{default:!0}}),L(()=>{he(ae,1,`w-16 h-16 rounded-2xl overflow-hidden border flex items-center justify-center shrink-0 ${e(t).icon?"bg-white/5":"bg-gradient-to-br"} ${e(t).type==="game"&&!e(t).icon?"from-amber-500/20 to-orange-500/25":""} ${e(t).type==="app"&&!e(t).icon?"from-blue-500/20 to-indigo-500/25":""} ${e(t).type==="game"?"border-amber-500/20":"border-blue-500/20"} ${e(t).icon?"border-white/10":""}`),h(ot,e(t).name),h(it,e(t).type==="game"?"Mobile Game":"Consumer App"),he(se,1,`px-5 py-4 rounded-xl mb-6 flex items-center gap-3 text-sm border ${e(F).status==="connected"?"bg-green-500/10 border-green-500/20 text-green-400":e(F).status==="disconnected"?"bg-red-500/10 border-red-500/20 text-red-400":"bg-white/5 border-white/10 text-white/45"}`),he(Ie,1,`w-2 h-2 rounded-full shrink-0 ${e(F).status==="connected"?"bg-green-400 shadow-lg shadow-green-400":e(F).status==="disconnected"?"bg-red-400":"bg-white/45"}`),h(lt,` ${e(F).text??""}`)}),u(d,k)};Y(Ze,d=>{e(t)&&d(et)})}u(ue,we),_t(),ce()}ft(["click"]);export{Sr as component};
