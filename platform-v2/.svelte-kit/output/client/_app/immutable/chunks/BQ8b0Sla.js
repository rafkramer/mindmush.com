import{w as m,e as u,m as g}from"./IT3EpKRj.js";const i="mindmush_ventures";function S(){const d=localStorage.getItem(i),o=d?JSON.parse(d):[],s=m(o);return s.subscribe(e=>{localStorage.setItem(i,JSON.stringify(e))}),{subscribe:s.subscribe,add:e=>{const t={...e,id:Date.now().toString(36)+Math.random().toString(36).substr(2,9),partners:[],expenses:[],createdAt:new Date().toISOString()};return s.update(r=>[...r,t]),t},update:(e,t)=>{s.update(r=>r.map(n=>n.id===e?{...n,...t}:n))},delete:e=>{s.update(t=>t.filter(r=>r.id!==e))},get:e=>g(s).find(t=>t.id===e),addExpense:(e,t)=>{const r={...t,id:Date.now().toString(36)+Math.random().toString(36).substr(2,5)};s.update(n=>n.map(a=>a.id===e?{...a,expenses:[...a.expenses,r]}:a))},deleteExpense:(e,t)=>{s.update(r=>r.map(n=>n.id===e?{...n,expenses:n.expenses.filter(a=>a.id!==t)}:n))},updatePartners:(e,t)=>{s.update(r=>r.map(n=>n.id===e?{...n,partners:t}:n))},getByState:e=>u(s,t=>e==="all"?t:t.filter(r=>r.state===e)),getByPartner:e=>u(s,t=>t.filter(r=>r.partners.some(n=>n.userId===e))),stats:u(s,e=>{let t=0,r=0,n=0;return e.forEach(a=>{const p=a.expenses.reduce((l,c)=>l+c.amount,0);t+=a.revenue||0,r+=p,n+=(a.revenue||0)*(a.studioEquity/100)}),{totalRevenue:t,totalExpenses:r,studioRevenue:n,count:e.length}})}}const b=S();export{b as v};
