import{w as c,e as u,m as g}from"./IT3EpKRj.js";const i="mindmush_users",d="mindmush_session";function f(){const a=localStorage.getItem(i),l=[{id:1,username:"admin",password:"admin123",role:"admin",contract:""}],S=a?JSON.parse(a):l;a||localStorage.setItem(i,JSON.stringify(l));const t=c(S),n=c(null);t.subscribe(e=>{localStorage.setItem(i,JSON.stringify(e))});{const e=sessionStorage.getItem(d);e&&n.set(JSON.parse(e))}return{users:t,currentUser:n,isAdmin:u(n,e=>(e==null?void 0:e.role)==="admin"),isLoggedIn:u(n,e=>e!==null),login:(e,s)=>{const r=g(t).find(m=>m.username===e&&m.password===s);return r?(n.set(r),sessionStorage.setItem(d,JSON.stringify(r)),!0):!1},logout:()=>{n.set(null),sessionStorage.removeItem(d)},addUser:e=>{const s={...e,id:Date.now()};return t.update(o=>[...o,s]),s},updateUser:(e,s)=>{t.update(o=>o.map(r=>r.id===e?{...r,...s}:r))},deleteUser:e=>{t.update(s=>s.filter(o=>o.id!==e))},getUser:e=>g(t).find(s=>s.id===e)}}const U=f();export{U as a};
